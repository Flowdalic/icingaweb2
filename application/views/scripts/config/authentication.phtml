<?php
use Icinga\Web\Url;
$createLdapBackend = $this->href('/config/createAuthenticationBackend', array('type' => 'ldap'));
$createDbBackend = $this->href('/config/createAuthenticationBackend', array('type' => 'db'));
?>
<div class="controls">
    <?= $this->tabs->render($this); ?>
</div>

<div class="content">
    <?php if (isset($this->messageBox)): ?>
        <?= $this->messageBox->render() ?>
    <?php endif ?>

    <h1>Create Authentication Provider</h1>
    <p>
        <a href="<?= $createLdapBackend ?>"><?= $this->img('img/icons/create.png', array('title' => 'Create A New LDAP Authentication Backend'));
                                                                                                  ?> Create A New LDAP Authentication Backend</a>
        <br />
        <a href="<?= $createDbBackend   ?>"><?= $this->img('img/icons/create.png', array('title' => 'Create A New DB Authentication Backend'));
                                                                                                  ?> Create A New DB Authentication Backend</a>
    </p>

    <table class="configTable">
        <?php foreach ($this->backends as $backend): ?>
            <tr>
                <td class="configTable">
                    <div>
                        <b>Backend:</b>&ensp;<?= $this->escape($backend->name); ?>
                    </div>
                    <div>
                        <div class="config-form-group">
                            <?= $backend->reorderForm; ?>
                        </div>
                        <a href="<?= $this->href('config/editAuthenticationBackend', array('auth_backend' => $backend->name));?>">
                            <?= $this->img('img/icons/edit.png', array('title' => 'Edit')); ?> Edit</a>&emsp;
                        <?php if (count($this->backends) > 1): ?>
                            <a href="<?= $this->href('config/removeAuthenticationBackend', array('auth_backend' => $backend->name));?>">
                                <?= $this->img('img/icons/remove.png', array('title' => 'Remove')); ?> Remove</a>&emsp;
                        <?php endif; ?>
                    </div>
                </td>
            </tr>
        <?php endforeach; ?>
    </table>
</div>
