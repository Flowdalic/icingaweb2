<?php
use Icinga\Web\Topbar;
?>
<nav class="navbar navbar-default navbar-fixed-top" id="icingatopbar" role="navigation">
    <div class="navbar-header">
        <a href="<?= $this->baseUrl('/') ?>" class="navbar-brand icinga-logo">Icinga</a>
    </div>

    <?php foreach (Topbar::getPartials() as $partial) {
        echo $this->partial($partial['viewScriptName'], $partial['moduleName'], $partial['data']);
    } ?>

  <?php if ($this->auth()->isAuthenticated()): ?>
  <ul class="nav navbar-nav pull-right" >
<!--        Remove component as of #4583 since it's not working-->
<!--        <li>-->
<!--          <form class="navbar-search" style="padding-top:0.2em">-->
<!--            <input type="text" class="search-query" placeholder="Search" style="padding-top:0.3em">-->
<!--          </form>-->
<!--        </li>-->
    <li class="dropdown">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" id="icinga_app_nav_useraction">
        <span id="icinga_app_nav_username">
          <?= $this->escape($this->auth()->getUser()->getUsername()); ?>
        </span>
        <i class="icinga-icon-user"></i>
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li id="icinga_app_nav_preferences">
          <a href="<?= $this->href('/preference'); ?>"><?= $this->translate('Preferences'); ?> </a>
        </li>
        <li id="icinga_app_nav_logout">
          <a href="<?= $this->href('/authentication/logout'); ?>" title="Logout"><?= $this->translate('Logout'); ?></a>
        </li>
      </ul>
    </li>
  </ul>
  <?php endif ?>

</nav>
